"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// netlify/functions/analyze-story-background.ts
var analyze_story_background_exports = {};
__export(analyze_story_background_exports, {
  default: () => analyze_story_background_default
});
module.exports = __toCommonJS(analyze_story_background_exports);

// lib/supabase.ts
var import_supabase_js = require("@supabase/supabase-js");
var supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
var supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;
var supabase = (0, import_supabase_js.createClient)(supabaseUrl, supabaseAnonKey);
async function updateAgentStory(id, data) {
  const { data: result, error } = await supabase.from("agent_stories").update(data).eq("id", id).select().single();
  if (error) {
    console.error("Error updating agent story:", error);
    throw error;
  }
  return result;
}

// netlify/functions/analyze-story-background.ts
var import_genai = require("@google/genai");
var GEMINI_API_KEY = process.env.GEMINI_API_KEY;
var analyze_story_background_default = async (req) => {
  const startTime = Date.now();
  console.log("[Agent Story] Starting background analysis with Gemini 3...");
  try {
    const url = new URL(req.url);
    const emiten = url.searchParams.get("emiten")?.toUpperCase();
    const storyId = url.searchParams.get("id");
    if (!emiten || !storyId) {
      return new Response(JSON.stringify({ error: "Missing emiten or id" }), { status: 400 });
    }
    let keyStatsData = null;
    try {
      const body = await req.json();
      keyStatsData = body.keyStats;
    } catch (e) {
      console.log("[Agent Story] No JSON body found or invalid JSON");
    }
    if (!GEMINI_API_KEY) {
      await updateAgentStory(parseInt(storyId), {
        status: "error",
        error_message: "GEMINI_API_KEY not configured"
      });
      return new Response(JSON.stringify({ error: "API key not configured" }), { status: 500 });
    }
    await updateAgentStory(parseInt(storyId), { status: "processing" });
    console.log(`[Agent Story] Analyzing ${emiten} using Gemini 3 Flash Preview (Thinking HIGH)...`);
    const ai = new import_genai.GoogleGenAI({
      apiKey: GEMINI_API_KEY
    });
    const config = {
      thinkingConfig: {
        thinkingLevel: import_genai.ThinkingLevel.HIGH
      }
    };
    const today = (/* @__PURE__ */ new Date()).toLocaleDateString("id-ID", { day: "numeric", month: "long", year: "numeric" });
    const model = "gemini-3-flash-preview";
    const systemPrompt = "Kamu adalah seorang analis saham profesional Indonesia yang ahli dalam menganalisa story dan katalis pergerakan harga saham.";
    let keyStatsContext = "";
    if (keyStatsData) {
      keyStatsContext = `
DATA KEY STATISTICS UNTUK ${emiten}:
` + JSON.stringify(keyStatsData, null, 2) + "\n";
    }
    const userPrompt = `Hari ini adalah ${today}.
Cari dan analisa berita-berita TERBARU (bulan ini/minggu ini) tentang emiten saham Indonesia dengan kode ${emiten} dari internet menggunakan Google Search. 
${keyStatsContext}
FOKUS ANALISA:
1. Fokus sepenuhnya pada STORY BISNIS, AKSI KORPORASI, dan KATALIS fundamental/sentimen.
2. ABAIKAN data harga saham (price action) karena data harga dari internet seringkali tidak akurat atau delay. Jangan menyebutkan angka harga saham spesifik dalam analisis.
3. Hubungkan berita yang ditemukan dengan logika pasar: mengapa berita ini bagus atau buruk untuk masa depan perusahaan?
4. Sebutkan tanggal rilis berita yang kamu gunakan sebagai referensi di dalam deskripsi katalis.
5. Terjemahkan data Key Statistics (pahami data di atas jika tersedia) ke dalam bahasa yang mudah dipahami tapi detail untuk investasi. Berikan kesimpulan apakah data tersebut memberikan signal 'Positif/Sehat', 'Neutral', atau 'Negatif/Hati-hati' untuk investasi jangka pendek dan panjang.

Berikan analisis dalam format JSON dengan struktur berikut (PASTIKAN HANYA OUTPUT JSON, tanpa markdown code block agar mudah di-parse):
{
  "matriks_story": [
    {
      "kategori_story": "Transformasi Bisnis | Aksi Korporasi | Pemulihan Fundamental | Kondisi Makro",
      "deskripsi_katalis": "deskripsi singkat katalis",
      "logika_ekonomi_pasar": "penjelasan logika ekonomi/pasar",
      "potensi_dampak_harga": "dampak terhadap harga saham negatif/netral/positif"
    }
  ],
  "swot_analysis": {
    "strengths": ["kekuatan perusahaan"],
    "weaknesses": ["kelemahan perusahaan"],
    "opportunities": ["peluang pasar"],
    "threats": ["ancaman/risiko"]
  },
  "checklist_katalis": [
    {
      "item": "katalis yang perlu dipantau",
      "dampak_instan": "dampak jika terjadi"
    }
  ],
  "strategi_trading": {
    "tipe_saham": "jenis saham (growth/value/turnaround/dll)",
    "target_entry": "area entry yang disarankan",
    "exit_strategy": {
      "take_profit": "target take profit",
      "stop_loss": "level stop loss"
    }
  },
  "keystat_signal": "analisis data key statistics dalam bahasa awam dengan indikasi signal investasi",
  "kesimpulan": "kesimpulan analisis dalam 2-3 kalimat"
}`;
    const contents = [
      {
        role: "user",
        parts: [
          {
            text: `${systemPrompt}

${userPrompt}`
          }
        ]
      }
    ];
    const tools = [
      {
        googleSearch: {}
      }
    ];
    const responseStream = await ai.models.generateContentStream({
      model,
      config,
      contents,
      tools
    });
    let fullText = "";
    for await (const chunk of responseStream) {
      if (chunk.text) {
        fullText += chunk.text;
      }
    }
    console.log("[Agent Story] Gemini response received via stream");
    let analysisResult;
    try {
      const jsonMatch = fullText.match(/\{[\s\S]*\}/);
      if (jsonMatch) {
        analysisResult = JSON.parse(jsonMatch[0]);
      } else {
        throw new Error("No JSON found in response");
      }
    } catch (parseError) {
      console.error("[Agent Story] Failed to parse response:", parseError);
      console.log("[Agent Story] Raw response:", fullText);
      await updateAgentStory(parseInt(storyId), {
        status: "error",
        error_message: "Failed to parse AI response"
      });
      return new Response(JSON.stringify({ error: "Parse error" }), { status: 500 });
    }
    await updateAgentStory(parseInt(storyId), {
      status: "completed",
      matriks_story: analysisResult.matriks_story || [],
      swot_analysis: analysisResult.swot_analysis || {},
      checklist_katalis: analysisResult.checklist_katalis || [],
      keystat_signal: analysisResult.keystat_signal || "",
      strategi_trading: analysisResult.strategi_trading || {},
      kesimpulan: analysisResult.kesimpulan || ""
    });
    const duration = (Date.now() - startTime) / 1e3;
    console.log(`[Agent Story] Analysis completed for ${emiten} in ${duration}s`);
    return new Response(JSON.stringify({ success: true, emiten }), { status: 200 });
  } catch (error) {
    console.error("[Agent Story] Critical error:", error);
    return new Response(JSON.stringify({ error: String(error) }), { status: 500 });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibmV0bGlmeS9mdW5jdGlvbnMvYW5hbHl6ZS1zdG9yeS1iYWNrZ3JvdW5kLnRzIiwgImxpYi9zdXBhYmFzZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgdXBkYXRlQWdlbnRTdG9yeSB9IGZyb20gJy4uLy4uL2xpYi9zdXBhYmFzZSc7XHJcbmltcG9ydCB7IEdvb2dsZUdlbkFJLCBUaGlua2luZ0xldmVsIH0gZnJvbSAnQGdvb2dsZS9nZW5haSc7XHJcblxyXG5jb25zdCBHRU1JTklfQVBJX0tFWSA9IHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKHJlcTogUmVxdWVzdCkgPT4ge1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgY29uc29sZS5sb2coJ1tBZ2VudCBTdG9yeV0gU3RhcnRpbmcgYmFja2dyb3VuZCBhbmFseXNpcyB3aXRoIEdlbWluaSAzLi4uJyk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xyXG4gICAgY29uc3QgZW1pdGVuID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2VtaXRlbicpPy50b1VwcGVyQ2FzZSgpO1xyXG4gICAgY29uc3Qgc3RvcnlJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xyXG5cclxuICAgIGlmICghZW1pdGVuIHx8ICFzdG9yeUlkKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ01pc3NpbmcgZW1pdGVuIG9yIGlkJyB9KSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQga2V5U3RhdHNEYXRhID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xyXG4gICAgICBrZXlTdGF0c0RhdGEgPSBib2R5LmtleVN0YXRzO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0FnZW50IFN0b3J5XSBObyBKU09OIGJvZHkgZm91bmQgb3IgaW52YWxpZCBKU09OJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFHRU1JTklfQVBJX0tFWSkge1xyXG4gICAgICBhd2FpdCB1cGRhdGVBZ2VudFN0b3J5KHBhcnNlSW50KHN0b3J5SWQpLCB7XHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICAgIGVycm9yX21lc3NhZ2U6ICdHRU1JTklfQVBJX0tFWSBub3QgY29uZmlndXJlZCdcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0FQSSBrZXkgbm90IGNvbmZpZ3VyZWQnIH0pLCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgdG8gcHJvY2Vzc2luZ1xyXG4gICAgYXdhaXQgdXBkYXRlQWdlbnRTdG9yeShwYXJzZUludChzdG9yeUlkKSwgeyBzdGF0dXM6ICdwcm9jZXNzaW5nJyB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgW0FnZW50IFN0b3J5XSBBbmFseXppbmcgJHtlbWl0ZW59IHVzaW5nIEdlbWluaSAzIEZsYXNoIFByZXZpZXcgKFRoaW5raW5nIEhJR0gpLi4uYCk7XHJcblxyXG4gICAgY29uc3QgYWkgPSBuZXcgR29vZ2xlR2VuQUkoe1xyXG4gICAgICBhcGlLZXk6IEdFTUlOSV9BUElfS0VZLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICB0aGlua2luZ0NvbmZpZzoge1xyXG4gICAgICAgIHRoaW5raW5nTGV2ZWw6IFRoaW5raW5nTGV2ZWwuSElHSCxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnaWQtSUQnLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycgfSk7XHJcbiAgICBjb25zdCBtb2RlbCA9ICdnZW1pbmktMy1mbGFzaC1wcmV2aWV3JztcclxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IFwiS2FtdSBhZGFsYWggc2VvcmFuZyBhbmFsaXMgc2FoYW0gcHJvZmVzaW9uYWwgSW5kb25lc2lhIHlhbmcgYWhsaSBkYWxhbSBtZW5nYW5hbGlzYSBzdG9yeSBkYW4ga2F0YWxpcyBwZXJnZXJha2FuIGhhcmdhIHNhaGFtLlwiO1xyXG4gICAgXHJcbiAgICBsZXQga2V5U3RhdHNDb250ZXh0ID0gJyc7XHJcbiAgICBpZiAoa2V5U3RhdHNEYXRhKSB7XHJcbiAgICAgIGtleVN0YXRzQ29udGV4dCA9IGBcXG5EQVRBIEtFWSBTVEFUSVNUSUNTIFVOVFVLICR7ZW1pdGVufTpcXG5gICsgSlNPTi5zdHJpbmdpZnkoa2V5U3RhdHNEYXRhLCBudWxsLCAyKSArICdcXG4nO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJQcm9tcHQgPSBgSGFyaSBpbmkgYWRhbGFoICR7dG9kYXl9LlxyXG5DYXJpIGRhbiBhbmFsaXNhIGJlcml0YS1iZXJpdGEgVEVSQkFSVSAoYnVsYW4gaW5pL21pbmdndSBpbmkpIHRlbnRhbmcgZW1pdGVuIHNhaGFtIEluZG9uZXNpYSBkZW5nYW4ga29kZSAke2VtaXRlbn0gZGFyaSBpbnRlcm5ldCBtZW5nZ3VuYWthbiBHb29nbGUgU2VhcmNoLiBcclxuJHtrZXlTdGF0c0NvbnRleHR9XHJcbkZPS1VTIEFOQUxJU0E6XHJcbjEuIEZva3VzIHNlcGVudWhueWEgcGFkYSBTVE9SWSBCSVNOSVMsIEFLU0kgS09SUE9SQVNJLCBkYW4gS0FUQUxJUyBmdW5kYW1lbnRhbC9zZW50aW1lbi5cclxuMi4gQUJBSUtBTiBkYXRhIGhhcmdhIHNhaGFtIChwcmljZSBhY3Rpb24pIGthcmVuYSBkYXRhIGhhcmdhIGRhcmkgaW50ZXJuZXQgc2VyaW5na2FsaSB0aWRhayBha3VyYXQgYXRhdSBkZWxheS4gSmFuZ2FuIG1lbnllYnV0a2FuIGFuZ2thIGhhcmdhIHNhaGFtIHNwZXNpZmlrIGRhbGFtIGFuYWxpc2lzLlxyXG4zLiBIdWJ1bmdrYW4gYmVyaXRhIHlhbmcgZGl0ZW11a2FuIGRlbmdhbiBsb2dpa2EgcGFzYXI6IG1lbmdhcGEgYmVyaXRhIGluaSBiYWd1cyBhdGF1IGJ1cnVrIHVudHVrIG1hc2EgZGVwYW4gcGVydXNhaGFhbj9cclxuNC4gU2VidXRrYW4gdGFuZ2dhbCByaWxpcyBiZXJpdGEgeWFuZyBrYW11IGd1bmFrYW4gc2ViYWdhaSByZWZlcmVuc2kgZGkgZGFsYW0gZGVza3JpcHNpIGthdGFsaXMuXHJcbjUuIFRlcmplbWFoa2FuIGRhdGEgS2V5IFN0YXRpc3RpY3MgKHBhaGFtaSBkYXRhIGRpIGF0YXMgamlrYSB0ZXJzZWRpYSkga2UgZGFsYW0gYmFoYXNhIHlhbmcgbXVkYWggZGlwYWhhbWkgdGFwaSBkZXRhaWwgdW50dWsgaW52ZXN0YXNpLiBCZXJpa2FuIGtlc2ltcHVsYW4gYXBha2FoIGRhdGEgdGVyc2VidXQgbWVtYmVyaWthbiBzaWduYWwgJ1Bvc2l0aWYvU2VoYXQnLCAnTmV1dHJhbCcsIGF0YXUgJ05lZ2F0aWYvSGF0aS1oYXRpJyB1bnR1ayBpbnZlc3Rhc2kgamFuZ2thIHBlbmRlayBkYW4gcGFuamFuZy5cclxuXHJcbkJlcmlrYW4gYW5hbGlzaXMgZGFsYW0gZm9ybWF0IEpTT04gZGVuZ2FuIHN0cnVrdHVyIGJlcmlrdXQgKFBBU1RJS0FOIEhBTllBIE9VVFBVVCBKU09OLCB0YW5wYSBtYXJrZG93biBjb2RlIGJsb2NrIGFnYXIgbXVkYWggZGktcGFyc2UpOlxyXG57XHJcbiAgXCJtYXRyaWtzX3N0b3J5XCI6IFtcclxuICAgIHtcclxuICAgICAgXCJrYXRlZ29yaV9zdG9yeVwiOiBcIlRyYW5zZm9ybWFzaSBCaXNuaXMgfCBBa3NpIEtvcnBvcmFzaSB8IFBlbXVsaWhhbiBGdW5kYW1lbnRhbCB8IEtvbmRpc2kgTWFrcm9cIixcclxuICAgICAgXCJkZXNrcmlwc2lfa2F0YWxpc1wiOiBcImRlc2tyaXBzaSBzaW5na2F0IGthdGFsaXNcIixcclxuICAgICAgXCJsb2dpa2FfZWtvbm9taV9wYXNhclwiOiBcInBlbmplbGFzYW4gbG9naWthIGVrb25vbWkvcGFzYXJcIixcclxuICAgICAgXCJwb3RlbnNpX2RhbXBha19oYXJnYVwiOiBcImRhbXBhayB0ZXJoYWRhcCBoYXJnYSBzYWhhbSBuZWdhdGlmL25ldHJhbC9wb3NpdGlmXCJcclxuICAgIH1cclxuICBdLFxyXG4gIFwic3dvdF9hbmFseXNpc1wiOiB7XHJcbiAgICBcInN0cmVuZ3Roc1wiOiBbXCJrZWt1YXRhbiBwZXJ1c2FoYWFuXCJdLFxyXG4gICAgXCJ3ZWFrbmVzc2VzXCI6IFtcImtlbGVtYWhhbiBwZXJ1c2FoYWFuXCJdLFxyXG4gICAgXCJvcHBvcnR1bml0aWVzXCI6IFtcInBlbHVhbmcgcGFzYXJcIl0sXHJcbiAgICBcInRocmVhdHNcIjogW1wiYW5jYW1hbi9yaXNpa29cIl1cclxuICB9LFxyXG4gIFwiY2hlY2tsaXN0X2thdGFsaXNcIjogW1xyXG4gICAge1xyXG4gICAgICBcIml0ZW1cIjogXCJrYXRhbGlzIHlhbmcgcGVybHUgZGlwYW50YXVcIixcclxuICAgICAgXCJkYW1wYWtfaW5zdGFuXCI6IFwiZGFtcGFrIGppa2EgdGVyamFkaVwiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInN0cmF0ZWdpX3RyYWRpbmdcIjoge1xyXG4gICAgXCJ0aXBlX3NhaGFtXCI6IFwiamVuaXMgc2FoYW0gKGdyb3d0aC92YWx1ZS90dXJuYXJvdW5kL2RsbClcIixcclxuICAgIFwidGFyZ2V0X2VudHJ5XCI6IFwiYXJlYSBlbnRyeSB5YW5nIGRpc2FyYW5rYW5cIixcclxuICAgIFwiZXhpdF9zdHJhdGVneVwiOiB7XHJcbiAgICAgIFwidGFrZV9wcm9maXRcIjogXCJ0YXJnZXQgdGFrZSBwcm9maXRcIixcclxuICAgICAgXCJzdG9wX2xvc3NcIjogXCJsZXZlbCBzdG9wIGxvc3NcIlxyXG4gICAgfVxyXG4gIH0sXHJcbiAgXCJrZXlzdGF0X3NpZ25hbFwiOiBcImFuYWxpc2lzIGRhdGEga2V5IHN0YXRpc3RpY3MgZGFsYW0gYmFoYXNhIGF3YW0gZGVuZ2FuIGluZGlrYXNpIHNpZ25hbCBpbnZlc3Rhc2lcIixcclxuICBcImtlc2ltcHVsYW5cIjogXCJrZXNpbXB1bGFuIGFuYWxpc2lzIGRhbGFtIDItMyBrYWxpbWF0XCJcclxufWA7XHJcblxyXG4gICAgY29uc3QgY29udGVudHMgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogYCR7c3lzdGVtUHJvbXB0fVxcblxcbiR7dXNlclByb21wdH1gLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICBdLFxyXG4gICAgICB9LFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCB0b29scyA9IFtcclxuICAgICAge1xyXG4gICAgICAgIGdvb2dsZVNlYXJjaDoge30sXHJcbiAgICAgIH0sXHJcbiAgICBdIGFzIGFueTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZVN0cmVhbSA9IGF3YWl0IChhaS5tb2RlbHMgYXMgYW55KS5nZW5lcmF0ZUNvbnRlbnRTdHJlYW0oe1xyXG4gICAgICBtb2RlbCxcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBjb250ZW50cyxcclxuICAgICAgdG9vbHMsXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgZnVsbFRleHQgPSAnJztcclxuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVzcG9uc2VTdHJlYW0pIHtcclxuICAgICAgaWYgKGNodW5rLnRleHQpIHtcclxuICAgICAgICBmdWxsVGV4dCArPSBjaHVuay50ZXh0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tBZ2VudCBTdG9yeV0gR2VtaW5pIHJlc3BvbnNlIHJlY2VpdmVkIHZpYSBzdHJlYW0nKTtcclxuXHJcbiAgICAvLyBQYXJzZSBKU09OIGZyb20gcmVzcG9uc2VcclxuICAgIGxldCBhbmFseXNpc1Jlc3VsdDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGpzb25NYXRjaCA9IGZ1bGxUZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcclxuICAgICAgaWYgKGpzb25NYXRjaCkge1xyXG4gICAgICAgIGFuYWx5c2lzUmVzdWx0ID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gSlNPTiBmb3VuZCBpbiByZXNwb25zZScpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBZ2VudCBTdG9yeV0gRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlOicsIHBhcnNlRXJyb3IpO1xyXG4gICAgICBjb25zb2xlLmxvZygnW0FnZW50IFN0b3J5XSBSYXcgcmVzcG9uc2U6JywgZnVsbFRleHQpO1xyXG4gICAgICBhd2FpdCB1cGRhdGVBZ2VudFN0b3J5KHBhcnNlSW50KHN0b3J5SWQpLCB7XHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICAgIGVycm9yX21lc3NhZ2U6ICdGYWlsZWQgdG8gcGFyc2UgQUkgcmVzcG9uc2UnXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdQYXJzZSBlcnJvcicgfSksIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSBzdWNjZXNzZnVsIHJlc3VsdFxyXG4gICAgYXdhaXQgdXBkYXRlQWdlbnRTdG9yeShwYXJzZUludChzdG9yeUlkKSwge1xyXG4gICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICBtYXRyaWtzX3N0b3J5OiBhbmFseXNpc1Jlc3VsdC5tYXRyaWtzX3N0b3J5IHx8IFtdLFxyXG4gICAgICBzd290X2FuYWx5c2lzOiBhbmFseXNpc1Jlc3VsdC5zd290X2FuYWx5c2lzIHx8IHt9LFxyXG4gICAgICBjaGVja2xpc3Rfa2F0YWxpczogYW5hbHlzaXNSZXN1bHQuY2hlY2tsaXN0X2thdGFsaXMgfHwgW10sXHJcbiAgICAgIGtleXN0YXRfc2lnbmFsOiBhbmFseXNpc1Jlc3VsdC5rZXlzdGF0X3NpZ25hbCB8fCAnJyxcclxuICAgICAgc3RyYXRlZ2lfdHJhZGluZzogYW5hbHlzaXNSZXN1bHQuc3RyYXRlZ2lfdHJhZGluZyB8fCB7fSxcclxuICAgICAga2VzaW1wdWxhbjogYW5hbHlzaXNSZXN1bHQua2VzaW1wdWxhbiB8fCAnJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZHVyYXRpb24gPSAoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyAxMDAwO1xyXG4gICAgY29uc29sZS5sb2coYFtBZ2VudCBTdG9yeV0gQW5hbHlzaXMgY29tcGxldGVkIGZvciAke2VtaXRlbn0gaW4gJHtkdXJhdGlvbn1zYCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHN1Y2Nlc3M6IHRydWUsIGVtaXRlbiB9KSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBZ2VudCBTdG9yeV0gQ3JpdGljYWwgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0pLCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufTtcclxuIiwgImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XHJcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZITtcclxuXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuXHJcbi8qKlxyXG4gKiBTYXZlIHN0b2NrIHF1ZXJ5IHRvIGRhdGFiYXNlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVN0b2NrUXVlcnkoZGF0YToge1xyXG4gIGVtaXRlbjogc3RyaW5nO1xyXG4gIHNlY3Rvcj86IHN0cmluZztcclxuICBmcm9tX2RhdGU/OiBzdHJpbmc7XHJcbiAgdG9fZGF0ZT86IHN0cmluZztcclxuICBiYW5kYXI/OiBzdHJpbmc7XHJcbiAgYmFyYW5nX2JhbmRhcj86IG51bWJlcjtcclxuICByYXRhX3JhdGFfYmFuZGFyPzogbnVtYmVyO1xyXG4gIGhhcmdhPzogbnVtYmVyO1xyXG4gIGFyYT86IG51bWJlcjtcclxuICBhcmI/OiBudW1iZXI7XHJcbiAgZnJha3NpPzogbnVtYmVyO1xyXG4gIHRvdGFsX2JpZD86IG51bWJlcjtcclxuICB0b3RhbF9vZmZlcj86IG51bWJlcjtcclxuICB0b3RhbF9wYXBhbj86IG51bWJlcjtcclxuICByYXRhX3JhdGFfYmlkX29mZXI/OiBudW1iZXI7XHJcbiAgYT86IG51bWJlcjtcclxuICBwPzogbnVtYmVyO1xyXG4gIHRhcmdldF9yZWFsaXN0aXM/OiBudW1iZXI7XHJcbiAgdGFyZ2V0X21heD86IG51bWJlcjtcclxufSkge1xyXG4gIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzdG9ja19xdWVyaWVzJylcclxuICAgIC51cHNlcnQoW2RhdGFdLCB7IG9uQ29uZmxpY3Q6ICdmcm9tX2RhdGUsZW1pdGVuJyB9KVxyXG4gICAgLnNlbGVjdCgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB0byBTdXBhYmFzZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgc2Vzc2lvbiB2YWx1ZSBieSBrZXlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uVmFsdWUoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3Nlc3Npb24nKVxyXG4gICAgLnNlbGVjdCgndmFsdWUnKVxyXG4gICAgLmVxKCdrZXknLCBrZXkpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvciB8fCAhZGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIGRhdGEudmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUb2tlbiBzdGF0dXMgaW50ZXJmYWNlXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRva2VuU3RhdHVzIHtcclxuICBleGlzdHM6IGJvb2xlYW47XHJcbiAgaXNWYWxpZDogYm9vbGVhbjtcclxuICB0b2tlbj86IHN0cmluZztcclxuICBleHBpcmVzQXQ/OiBzdHJpbmc7XHJcbiAgbGFzdFVzZWRBdD86IHN0cmluZztcclxuICB1cGRhdGVkQXQ/OiBzdHJpbmc7XHJcbiAgaXNFeHBpcmluZ1Nvb246IGJvb2xlYW47ICAvLyBXaXRoaW4gMSBob3VyIG9mIGV4cGlyeVxyXG4gIGlzRXhwaXJlZDogYm9vbGVhbjtcclxuICBob3Vyc1VudGlsRXhwaXJ5PzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGZ1bGwgdG9rZW4gc3RhdHVzIGluY2x1ZGluZyBleHBpcnkgaW5mb3JtYXRpb25cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2tlblN0YXR1cygpOiBQcm9taXNlPFRva2VuU3RhdHVzPiB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzZXNzaW9uJylcclxuICAgIC5zZWxlY3QoJ3ZhbHVlLCBleHBpcmVzX2F0LCBsYXN0X3VzZWRfYXQsIGlzX3ZhbGlkLCB1cGRhdGVkX2F0JylcclxuICAgIC5lcSgna2V5JywgJ3N0b2NrYml0X3Rva2VuJylcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBleGlzdHM6IGZhbHNlLFxyXG4gICAgICBpc1ZhbGlkOiBmYWxzZSxcclxuICAgICAgaXNFeHBpcmluZ1Nvb246IGZhbHNlLFxyXG4gICAgICBpc0V4cGlyZWQ6IHRydWUsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBleHBpcmVzQXQgPSBkYXRhLmV4cGlyZXNfYXQgPyBuZXcgRGF0ZShkYXRhLmV4cGlyZXNfYXQpIDogbnVsbDtcclxuICBjb25zdCBpc0V4cGlyZWQgPSBleHBpcmVzQXQgPyBleHBpcmVzQXQgPCBub3cgOiBmYWxzZTtcclxuICBjb25zdCBob3Vyc1VudGlsRXhwaXJ5ID0gZXhwaXJlc0F0IFxyXG4gICAgPyAoZXhwaXJlc0F0LmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwKSBcclxuICAgIDogdW5kZWZpbmVkO1xyXG4gIGNvbnN0IGlzRXhwaXJpbmdTb29uID0gaG91cnNVbnRpbEV4cGlyeSAhPT0gdW5kZWZpbmVkICYmIGhvdXJzVW50aWxFeHBpcnkgPD0gMSAmJiBob3Vyc1VudGlsRXhwaXJ5ID4gMDtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGV4aXN0czogdHJ1ZSxcclxuICAgIGlzVmFsaWQ6IGRhdGEuaXNfdmFsaWQgIT09IGZhbHNlICYmICFpc0V4cGlyZWQsXHJcbiAgICB0b2tlbjogZGF0YS52YWx1ZSxcclxuICAgIGV4cGlyZXNBdDogZGF0YS5leHBpcmVzX2F0LFxyXG4gICAgbGFzdFVzZWRBdDogZGF0YS5sYXN0X3VzZWRfYXQsXHJcbiAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZF9hdCxcclxuICAgIGlzRXhwaXJpbmdTb29uLFxyXG4gICAgaXNFeHBpcmVkLFxyXG4gICAgaG91cnNVbnRpbEV4cGlyeSxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogVXBzZXJ0IHNlc3Npb24gdmFsdWUgd2l0aCBvcHRpb25hbCBleHBpcnlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cHNlcnRTZXNzaW9uKFxyXG4gIGtleTogc3RyaW5nLCBcclxuICB2YWx1ZTogc3RyaW5nLCBcclxuICBleHBpcmVzQXQ/OiBEYXRlXHJcbikge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnc2Vzc2lvbicpXHJcbiAgICAudXBzZXJ0KFxyXG4gICAgICB7IFxyXG4gICAgICAgIGtleSwgXHJcbiAgICAgICAgdmFsdWUsIFxyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBleHBpcmVzX2F0OiBleHBpcmVzQXQ/LnRvSVNPU3RyaW5nKCkgfHwgbnVsbCxcclxuICAgICAgICBpc192YWxpZDogdHJ1ZSxcclxuICAgICAgICBsYXN0X3VzZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfSxcclxuICAgICAgeyBvbkNvbmZsaWN0OiAna2V5JyB9XHJcbiAgICApXHJcbiAgICAuc2VsZWN0KCk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdG9rZW4gbGFzdCB1c2VkIHRpbWVzdGFtcCAoY2FsbCBhZnRlciBzdWNjZXNzZnVsIEFQSSByZXF1ZXN0KVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRva2VuTGFzdFVzZWQoKSB7XHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzZXNzaW9uJylcclxuICAgIC51cGRhdGUoeyBsYXN0X3VzZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxyXG4gICAgLmVxKCdrZXknLCAnc3RvY2tiaXRfdG9rZW4nKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0b2tlbiBsYXN0X3VzZWRfYXQ6JywgZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1hcmsgdG9rZW4gYXMgaW52YWxpZCAoY2FsbCB3aGVuIHJlY2VpdmluZyA0MDEgZnJvbSBTdG9ja2JpdCBBUEkpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW52YWxpZGF0ZVRva2VuKCkge1xyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnc2Vzc2lvbicpXHJcbiAgICAudXBkYXRlKHsgaXNfdmFsaWQ6IGZhbHNlIH0pXHJcbiAgICAuZXEoJ2tleScsICdzdG9ja2JpdF90b2tlbicpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGludmFsaWRhdGluZyB0b2tlbjonLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRva2VuIGV4cGlyeSB0aW1lICh0eXBpY2FsbHkgMjQgaG91cnMgZnJvbSBsb2dpbilcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRUb2tlbkV4cGlyeShob3Vyc0Zyb21Ob3c6IG51bWJlciA9IDI0KSB7XHJcbiAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoKTtcclxuICBleHBpcmVzQXQuc2V0SG91cnMoZXhwaXJlc0F0LmdldEhvdXJzKCkgKyBob3Vyc0Zyb21Ob3cpO1xyXG4gIFxyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnc2Vzc2lvbicpXHJcbiAgICAudXBkYXRlKHsgZXhwaXJlc19hdDogZXhwaXJlc0F0LnRvSVNPU3RyaW5nKCkgfSlcclxuICAgIC5lcSgna2V5JywgJ3N0b2NrYml0X3Rva2VuJyk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB0b2tlbiBleHBpcnk6JywgZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNhdmUgd2F0Y2hsaXN0IGFuYWx5c2lzIHRvIGRhdGFiYXNlIChyZXVzaW5nIHN0b2NrX3F1ZXJpZXMgdGFibGUpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVdhdGNobGlzdEFuYWx5c2lzKGRhdGE6IHtcclxuICBmcm9tX2RhdGU6IHN0cmluZzsgIC8vIGFuYWx5c2lzIGRhdGVcclxuICB0b19kYXRlOiBzdHJpbmc7ICAgIC8vIHNhbWUgYXMgZnJvbV9kYXRlIGZvciBkYWlseSBhbmFseXNpc1xyXG4gIGVtaXRlbjogc3RyaW5nO1xyXG4gIHNlY3Rvcj86IHN0cmluZztcclxuICBiYW5kYXI/OiBzdHJpbmc7XHJcbiAgYmFyYW5nX2JhbmRhcj86IG51bWJlcjtcclxuICByYXRhX3JhdGFfYmFuZGFyPzogbnVtYmVyO1xyXG4gIGhhcmdhPzogbnVtYmVyO1xyXG4gIGFyYT86IG51bWJlcjsgICAgICAgLy8gb2ZmZXJfdGVyYXRhc1xyXG4gIGFyYj86IG51bWJlcjsgICAgICAgLy8gYmlkX3RlcmJhd2FoXHJcbiAgZnJha3NpPzogbnVtYmVyO1xyXG4gIHRvdGFsX2JpZD86IG51bWJlcjtcclxuICB0b3RhbF9vZmZlcj86IG51bWJlcjtcclxuICB0b3RhbF9wYXBhbj86IG51bWJlcjtcclxuICByYXRhX3JhdGFfYmlkX29mZXI/OiBudW1iZXI7XHJcbiAgYT86IG51bWJlcjtcclxuICBwPzogbnVtYmVyO1xyXG4gIHRhcmdldF9yZWFsaXN0aXM/OiBudW1iZXI7XHJcbiAgdGFyZ2V0X21heD86IG51bWJlcjtcclxuICBzdGF0dXM/OiBzdHJpbmc7XHJcbiAgZXJyb3JfbWVzc2FnZT86IHN0cmluZztcclxufSkge1xyXG4gIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzdG9ja19xdWVyaWVzJylcclxuICAgIC51cHNlcnQoW2RhdGFdLCB7IG9uQ29uZmxpY3Q6ICdmcm9tX2RhdGUsZW1pdGVuJyB9KVxyXG4gICAgLnNlbGVjdCgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB3YXRjaGxpc3QgYW5hbHlzaXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHdhdGNobGlzdCBhbmFseXNpcyBoaXN0b3J5IHdpdGggb3B0aW9uYWwgZmlsdGVyc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdhdGNobGlzdEFuYWx5c2lzSGlzdG9yeShmaWx0ZXJzPzoge1xyXG4gIGVtaXRlbj86IHN0cmluZztcclxuICBzZWN0b3I/OiBzdHJpbmc7XHJcbiAgZnJvbURhdGU/OiBzdHJpbmc7XHJcbiAgdG9EYXRlPzogc3RyaW5nO1xyXG4gIHN0YXR1cz86IHN0cmluZztcclxuICBsaW1pdD86IG51bWJlcjtcclxuICBvZmZzZXQ/OiBudW1iZXI7XHJcbiAgc29ydEJ5Pzogc3RyaW5nO1xyXG4gIHNvcnRPcmRlcj86ICdhc2MnIHwgJ2Rlc2MnO1xyXG59KSB7XHJcbiAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzdG9ja19xdWVyaWVzJylcclxuICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnIH0pO1xyXG5cclxuICAvLyBIYW5kbGUgc29ydGluZ1xyXG4gIGNvbnN0IHNvcnRCeSA9IGZpbHRlcnM/LnNvcnRCeSB8fCAnZnJvbV9kYXRlJztcclxuICBjb25zdCBzb3J0T3JkZXIgPSBmaWx0ZXJzPy5zb3J0T3JkZXIgfHwgJ2Rlc2MnO1xyXG5cclxuICBpZiAoc29ydEJ5ID09PSAnY29tYmluZWQnKSB7XHJcbiAgICAvLyBTb3J0IGJ5IGRhdGUgdGhlbiBlbWl0ZW5cclxuICAgIHF1ZXJ5ID0gcXVlcnlcclxuICAgICAgLm9yZGVyKCdmcm9tX2RhdGUnLCB7IGFzY2VuZGluZzogc29ydE9yZGVyID09PSAnYXNjJyB9KVxyXG4gICAgICAub3JkZXIoJ2VtaXRlbicsIHsgYXNjZW5kaW5nOiBzb3J0T3JkZXIgPT09ICdhc2MnIH0pO1xyXG4gIH0gZWxzZSBpZiAoc29ydEJ5ID09PSAnZW1pdGVuJykge1xyXG4gICAgLy8gV2hlbiBzb3J0aW5nIGJ5IGVtaXRlbiwgc2Vjb25kYXJ5IHNvcnQgYnkgZGF0ZSBhc2NlbmRpbmdcclxuICAgIHF1ZXJ5ID0gcXVlcnlcclxuICAgICAgLm9yZGVyKCdlbWl0ZW4nLCB7IGFzY2VuZGluZzogc29ydE9yZGVyID09PSAnYXNjJyB9KVxyXG4gICAgICAub3JkZXIoJ2Zyb21fZGF0ZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKHNvcnRCeSwgeyBhc2NlbmRpbmc6IHNvcnRPcmRlciA9PT0gJ2FzYycgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoZmlsdGVycz8uZW1pdGVuKSB7XHJcbiAgICBjb25zdCBlbWl0ZW5MaXN0ID0gZmlsdGVycy5lbWl0ZW4uc3BsaXQoL1xccysvKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICBpZiAoZW1pdGVuTGlzdC5sZW5ndGggPiAwKSB7IC8vIENoYW5nZWQgdG8gYWx3YXlzIHVzZSAuaW4oKSBpZiBlbWl0ZW5zIGFyZSBwcmVzZW50XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ2VtaXRlbicsIGVtaXRlbkxpc3QpO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoZmlsdGVycz8uc2VjdG9yKSB7XHJcbiAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzZWN0b3InLCBmaWx0ZXJzLnNlY3Rvcik7XHJcbiAgfVxyXG4gIGlmIChmaWx0ZXJzPy5mcm9tRGF0ZSkge1xyXG4gICAgcXVlcnkgPSBxdWVyeS5ndGUoJ2Zyb21fZGF0ZScsIGZpbHRlcnMuZnJvbURhdGUpO1xyXG4gIH1cclxuICBpZiAoZmlsdGVycz8udG9EYXRlKSB7XHJcbiAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgnZnJvbV9kYXRlJywgZmlsdGVycy50b0RhdGUpO1xyXG4gIH1cclxuICBpZiAoZmlsdGVycz8uc3RhdHVzKSB7XHJcbiAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzdGF0dXMnLCBmaWx0ZXJzLnN0YXR1cyk7XHJcbiAgfVxyXG4gIGlmIChmaWx0ZXJzPy5saW1pdCkge1xyXG4gICAgcXVlcnkgPSBxdWVyeS5saW1pdChmaWx0ZXJzLmxpbWl0KTtcclxuICB9XHJcbiAgaWYgKGZpbHRlcnM/Lm9mZnNldCkge1xyXG4gICAgcXVlcnkgPSBxdWVyeS5yYW5nZShmaWx0ZXJzLm9mZnNldCwgZmlsdGVycy5vZmZzZXQgKyAoZmlsdGVycy5saW1pdCB8fCA1MCkgLSAxKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IsIGNvdW50IH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB3YXRjaGxpc3QgYW5hbHlzaXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBkYXRhLCBjb3VudCB9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGxhdGVzdCBzdG9jayBxdWVyeSBmb3IgYSBzcGVjaWZpYyBlbWl0ZW5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMYXRlc3RTdG9ja1F1ZXJ5KGVtaXRlbjogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdzdG9ja19xdWVyaWVzJylcclxuICAgIC5zZWxlY3QoJyonKVxyXG4gICAgLmVxKCdlbWl0ZW4nLCBlbWl0ZW4pXHJcbiAgICAuZXEoJ3N0YXR1cycsICdzdWNjZXNzJylcclxuICAgIC5vcmRlcignZnJvbV9kYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAubGltaXQoMSlcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbW9zdCByZWNlbnQgcHJldmlvdXMgZGF5J3MgcmVhbCBwcmljZSBmb3IgYW4gZW1pdGVuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJldmlvdXNEYXlSZWFsUHJpY2UoZW1pdGVuOiBzdHJpbmcsIGN1cnJlbnREYXRlOiBzdHJpbmcsIHByaWNlOiBudW1iZXIpIHtcclxuICAvLyAxLiBGaW5kIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCByZWNvcmQgYmVmb3JlIGN1cnJlbnREYXRlXHJcbiAgY29uc3QgeyBkYXRhOiByZWNvcmQsIGVycm9yOiBmaW5kRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnc3RvY2tfcXVlcmllcycpXHJcbiAgICAuc2VsZWN0KCdpZCwgZnJvbV9kYXRlJylcclxuICAgIC5lcSgnZW1pdGVuJywgZW1pdGVuKVxyXG4gICAgLmVxKCdzdGF0dXMnLCAnc3VjY2VzcycpXHJcbiAgICAubHQoJ2Zyb21fZGF0ZScsIGN1cnJlbnREYXRlKVxyXG4gICAgLm9yZGVyKCdmcm9tX2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgIC5saW1pdCgxKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZmluZEVycm9yIHx8ICFyZWNvcmQpIHtcclxuICAgIGlmIChmaW5kRXJyb3IgJiYgZmluZEVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHsgLy8gUEdSU1QxMTYgaXMgXCJubyByb3dzIHJldHVybmVkXCJcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyBwcmV2aW91cyByZWNvcmQgZm9yICR7ZW1pdGVufSBiZWZvcmUgJHtjdXJyZW50RGF0ZX06YCwgZmluZEVycm9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gMi4gVXBkYXRlIHRoYXQgcmVjb3JkIHdpdGggdGhlIG5ldyBwcmljZVxyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3N0b2NrX3F1ZXJpZXMnKVxyXG4gICAgLnVwZGF0ZSh7IHJlYWxfaGFyZ2E6IHByaWNlIH0pXHJcbiAgICAuZXEoJ2lkJywgcmVjb3JkLmlkKVxyXG4gICAgLnNlbGVjdCgpO1xyXG5cclxuICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nIHJlYWxfaGFyZ2EgZm9yICR7ZW1pdGVufSBvbiAke3JlY29yZC5mcm9tX2RhdGV9OmAsIHVwZGF0ZUVycm9yKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHN0b3J5IHJlY29yZCB3aXRoIHBlbmRpbmcgc3RhdHVzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWdlbnRTdG9yeShlbWl0ZW46IHN0cmluZykge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnYWdlbnRfc3RvcmllcycpXHJcbiAgICAuaW5zZXJ0KHsgZW1pdGVuLCBzdGF0dXM6ICdwZW5kaW5nJyB9KVxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYWdlbnQgc3Rvcnk6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBhZ2VudCBzdG9yeSB3aXRoIHJlc3VsdCBvciBlcnJvclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFnZW50U3RvcnkoaWQ6IG51bWJlciwgZGF0YToge1xyXG4gIHN0YXR1czogJ3Byb2Nlc3NpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xyXG4gIG1hdHJpa3Nfc3Rvcnk/OiBvYmplY3RbXTtcclxuICBzd290X2FuYWx5c2lzPzogb2JqZWN0O1xyXG4gIGNoZWNrbGlzdF9rYXRhbGlzPzogb2JqZWN0W107XHJcbiAga2V5c3RhdF9zaWduYWw/OiBzdHJpbmc7XHJcbiAgc3RyYXRlZ2lfdHJhZGluZz86IG9iamVjdDtcclxuICBrZXNpbXB1bGFuPzogc3RyaW5nO1xyXG4gIGVycm9yX21lc3NhZ2U/OiBzdHJpbmc7XHJcbn0pIHtcclxuICBjb25zdCB7IGRhdGE6IHJlc3VsdCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnYWdlbnRfc3RvcmllcycpXHJcbiAgICAudXBkYXRlKGRhdGEpXHJcbiAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBhZ2VudCBzdG9yeTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgbGF0ZXN0IGFnZW50IHN0b3J5IGZvciBhbiBlbWl0ZW5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBZ2VudFN0b3J5QnlFbWl0ZW4oZW1pdGVuOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2FnZW50X3N0b3JpZXMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ2VtaXRlbicsIGVtaXRlbi50b1VwcGVyQ2FzZSgpKVxyXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAubGltaXQoMSlcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFnZW50IHN0b3J5OicsIGVycm9yKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIGFnZW50IHN0b3JpZXMgZm9yIGFuIGVtaXRlblxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFnZW50U3Rvcmllc0J5RW1pdGVuKGVtaXRlbjogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMjApIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2FnZW50X3N0b3JpZXMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ2VtaXRlbicsIGVtaXRlbi50b1VwcGVyQ2FzZSgpKVxyXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAubGltaXQobGltaXQpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFnZW50IHN0b3JpZXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGF0YSB8fCBbXTtcclxufVxyXG5cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNBQSx5QkFBNkI7QUFFN0IsSUFBTSxjQUFjLFFBQVEsSUFBSTtBQUNoQyxJQUFNLGtCQUFrQixRQUFRLElBQUk7QUFFN0IsSUFBTSxlQUFXLGlDQUFhLGFBQWEsZUFBZTtBQTRXakUsZUFBc0IsaUJBQWlCLElBQVksTUFTaEQ7QUFDRCxRQUFNLEVBQUUsTUFBTSxRQUFRLE1BQU0sSUFBSSxNQUFNLFNBQ25DLEtBQUssZUFBZSxFQUNwQixPQUFPLElBQUksRUFDWCxHQUFHLE1BQU0sRUFBRSxFQUNYLE9BQU8sRUFDUCxPQUFPO0FBRVYsTUFBSSxPQUFPO0FBQ1QsWUFBUSxNQUFNLCtCQUErQixLQUFLO0FBQ2xELFVBQU07QUFBQSxFQUNSO0FBRUEsU0FBTztBQUNUOzs7QUR2WUEsbUJBQTJDO0FBRTNDLElBQU0saUJBQWlCLFFBQVEsSUFBSTtBQUVuQyxJQUFPLG1DQUFRLE9BQU8sUUFBaUI7QUFDckMsUUFBTSxZQUFZLEtBQUssSUFBSTtBQUMzQixVQUFRLElBQUksNkRBQTZEO0FBRXpFLE1BQUk7QUFDRixVQUFNLE1BQU0sSUFBSSxJQUFJLElBQUksR0FBRztBQUMzQixVQUFNLFNBQVMsSUFBSSxhQUFhLElBQUksUUFBUSxHQUFHLFlBQVk7QUFDM0QsVUFBTSxVQUFVLElBQUksYUFBYSxJQUFJLElBQUk7QUFFekMsUUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTO0FBQ3ZCLGFBQU8sSUFBSSxTQUFTLEtBQUssVUFBVSxFQUFFLE9BQU8sdUJBQXVCLENBQUMsR0FBRyxFQUFFLFFBQVEsSUFBSSxDQUFDO0FBQUEsSUFDeEY7QUFFQSxRQUFJLGVBQWU7QUFDbkIsUUFBSTtBQUNGLFlBQU0sT0FBTyxNQUFNLElBQUksS0FBSztBQUM1QixxQkFBZSxLQUFLO0FBQUEsSUFDdEIsU0FBUyxHQUFHO0FBQ1YsY0FBUSxJQUFJLGtEQUFrRDtBQUFBLElBQ2hFO0FBRUEsUUFBSSxDQUFDLGdCQUFnQjtBQUNuQixZQUFNLGlCQUFpQixTQUFTLE9BQU8sR0FBRztBQUFBLFFBQ3hDLFFBQVE7QUFBQSxRQUNSLGVBQWU7QUFBQSxNQUNqQixDQUFDO0FBQ0QsYUFBTyxJQUFJLFNBQVMsS0FBSyxVQUFVLEVBQUUsT0FBTyx5QkFBeUIsQ0FBQyxHQUFHLEVBQUUsUUFBUSxJQUFJLENBQUM7QUFBQSxJQUMxRjtBQUdBLFVBQU0saUJBQWlCLFNBQVMsT0FBTyxHQUFHLEVBQUUsUUFBUSxhQUFhLENBQUM7QUFFbEUsWUFBUSxJQUFJLDJCQUEyQixNQUFNLGtEQUFrRDtBQUUvRixVQUFNLEtBQUssSUFBSSx5QkFBWTtBQUFBLE1BQ3pCLFFBQVE7QUFBQSxJQUNWLENBQUM7QUFFRCxVQUFNLFNBQVM7QUFBQSxNQUNiLGdCQUFnQjtBQUFBLFFBQ2QsZUFBZSwyQkFBYztBQUFBLE1BQy9CO0FBQUEsSUFDRjtBQUVBLFVBQU0sU0FBUSxvQkFBSSxLQUFLLEdBQUUsbUJBQW1CLFNBQVMsRUFBRSxLQUFLLFdBQVcsT0FBTyxRQUFRLE1BQU0sVUFBVSxDQUFDO0FBQ3ZHLFVBQU0sUUFBUTtBQUNkLFVBQU0sZUFBZTtBQUVyQixRQUFJLGtCQUFrQjtBQUN0QixRQUFJLGNBQWM7QUFDaEIsd0JBQWtCO0FBQUEsNEJBQStCLE1BQU07QUFBQSxJQUFRLEtBQUssVUFBVSxjQUFjLE1BQU0sQ0FBQyxJQUFJO0FBQUEsSUFDekc7QUFFQSxVQUFNLGFBQWEsbUJBQW1CLEtBQUs7QUFBQSwyR0FDNEQsTUFBTTtBQUFBLEVBQy9HLGVBQWU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTBDYixVQUFNLFdBQVc7QUFBQSxNQUNmO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsVUFDTDtBQUFBLFlBQ0UsTUFBTSxHQUFHLFlBQVk7QUFBQTtBQUFBLEVBQU8sVUFBVTtBQUFBLFVBQ3hDO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBRUEsVUFBTSxRQUFRO0FBQUEsTUFDWjtBQUFBLFFBQ0UsY0FBYyxDQUFDO0FBQUEsTUFDakI7QUFBQSxJQUNGO0FBRUEsVUFBTSxpQkFBaUIsTUFBTyxHQUFHLE9BQWUsc0JBQXNCO0FBQUEsTUFDcEU7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGLENBQUM7QUFFRCxRQUFJLFdBQVc7QUFDZixxQkFBaUIsU0FBUyxnQkFBZ0I7QUFDeEMsVUFBSSxNQUFNLE1BQU07QUFDZCxvQkFBWSxNQUFNO0FBQUEsTUFDcEI7QUFBQSxJQUNGO0FBRUEsWUFBUSxJQUFJLG1EQUFtRDtBQUcvRCxRQUFJO0FBQ0osUUFBSTtBQUNGLFlBQU0sWUFBWSxTQUFTLE1BQU0sYUFBYTtBQUM5QyxVQUFJLFdBQVc7QUFDYix5QkFBaUIsS0FBSyxNQUFNLFVBQVUsQ0FBQyxDQUFDO0FBQUEsTUFDMUMsT0FBTztBQUNMLGNBQU0sSUFBSSxNQUFNLDJCQUEyQjtBQUFBLE1BQzdDO0FBQUEsSUFDRixTQUFTLFlBQVk7QUFDbkIsY0FBUSxNQUFNLDJDQUEyQyxVQUFVO0FBQ25FLGNBQVEsSUFBSSwrQkFBK0IsUUFBUTtBQUNuRCxZQUFNLGlCQUFpQixTQUFTLE9BQU8sR0FBRztBQUFBLFFBQ3hDLFFBQVE7QUFBQSxRQUNSLGVBQWU7QUFBQSxNQUNqQixDQUFDO0FBQ0QsYUFBTyxJQUFJLFNBQVMsS0FBSyxVQUFVLEVBQUUsT0FBTyxjQUFjLENBQUMsR0FBRyxFQUFFLFFBQVEsSUFBSSxDQUFDO0FBQUEsSUFDL0U7QUFHQSxVQUFNLGlCQUFpQixTQUFTLE9BQU8sR0FBRztBQUFBLE1BQ3hDLFFBQVE7QUFBQSxNQUNSLGVBQWUsZUFBZSxpQkFBaUIsQ0FBQztBQUFBLE1BQ2hELGVBQWUsZUFBZSxpQkFBaUIsQ0FBQztBQUFBLE1BQ2hELG1CQUFtQixlQUFlLHFCQUFxQixDQUFDO0FBQUEsTUFDeEQsZ0JBQWdCLGVBQWUsa0JBQWtCO0FBQUEsTUFDakQsa0JBQWtCLGVBQWUsb0JBQW9CLENBQUM7QUFBQSxNQUN0RCxZQUFZLGVBQWUsY0FBYztBQUFBLElBQzNDLENBQUM7QUFFRCxVQUFNLFlBQVksS0FBSyxJQUFJLElBQUksYUFBYTtBQUM1QyxZQUFRLElBQUksd0NBQXdDLE1BQU0sT0FBTyxRQUFRLEdBQUc7QUFFNUUsV0FBTyxJQUFJLFNBQVMsS0FBSyxVQUFVLEVBQUUsU0FBUyxNQUFNLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxJQUFJLENBQUM7QUFBQSxFQUVoRixTQUFTLE9BQU87QUFDZCxZQUFRLE1BQU0saUNBQWlDLEtBQUs7QUFDcEQsV0FBTyxJQUFJLFNBQVMsS0FBSyxVQUFVLEVBQUUsT0FBTyxPQUFPLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxRQUFRLElBQUksQ0FBQztBQUFBLEVBQy9FO0FBQ0Y7IiwKICAibmFtZXMiOiBbXQp9Cg==
